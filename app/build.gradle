apply plugin: 'com.android.application'

android {
    compileSdkVersion 23
    buildToolsVersion "23.0.2"

    defaultConfig {
        applicationId "com.lxj.smartyalbum"
        minSdkVersion 22
        targetSdkVersion 23
        versionCode 1
        versionName "1.0"
    }
    lintOptions {
        abortOnError false
    }
    signingConfigs {
        release {
            storeFile file("../android.keystore")      //签名文件
            storePassword "epweike"
            keyAlias "android.keystore"
            keyPassword "epweike"  //签名密码
        }
    }
    //渠道包
    productFlavors {
        epweike {}
        wangyi {}
        anzhi {}
        appchina {}
        gfan {}
        mumayi {}
        eoemarket {}
        nduoa {}
        borpor {}
        hiapk {}
        Store91 {}
        Store520 {}
        liqucn {}
        baidu {}
        Store360 {}
        wandoujia {}
        myapp {}
        xiaomisogou {}
        sohu {}
        paojiao {}
        lenovo {}
        huawei {}
        fpwap {}
        gunxueqiu {}
        Store8 {}
        candou {}
        meizu {}
        zol {}
    }

    productFlavors.all {
        flavor -> flavor.manifestPlaceholders = [CHANNEL_VALUE: name]
    }
    buildTypes {
        release {
            signingConfig signingConfigs.release
            minifyEnabled true
            zipAlignEnabled true
            proguardFiles 'proguard-rules.pro'
            shrinkResources true
            applicationVariants.all { variant ->
                variant.outputs.each { output ->
                    def outputFile = output.outputFile
                    if (outputFile != null && outputFile.name.endsWith('.apk')) {
                        def fileName = "MyUtil_${defaultConfig.versionName}_${releaseTime()}.apk"
                        output.outputFile = new File(outputFile.parent, fileName)
                    }
                }
            }
        }
    }
}

def releaseTime() {
    return new Date().format("yyyy-MM-dd", TimeZone.getTimeZone("GMT+8"))
}


dependencies {
    compile fileTree(dir: 'libs', include: ['*.jar'])
    testCompile 'junit:junit:4.12'
    compile 'com.android.support:appcompat-v7:23.1.1'
    compile 'com.android.support:design:23.1.1'
    compile 'com.github.bumptech.glide:glide:3.6.1'
    compile 'com.android.support:support-v4:23.1.1'
}
